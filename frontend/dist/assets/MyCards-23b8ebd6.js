import{u as z,r as o,z as m,j as e,m as i,L as h,A as T}from"./index-8cd23c11.js";import{c as k}from"./cards-86624514.js";import{L as P}from"./LoadingSpinner-9af0e7b2.js";import{C as q}from"./ChartBarIcon-4bb0bddb.js";import{E as M}from"./EyeIcon-02704138.js";import{H as S}from"./HeartIcon-61eeb04d.js";import{P as p}from"./PlusIcon-3b0dbada.js";import{S as F}from"./ShareIcon-1962f896.js";import{T as H}from"./TrashIcon-a0377199.js";const W=()=>{const{user:j}=z(),[d,f]=o.useState([]),[u,w]=o.useState(!0),[r,b]=o.useState(null),[L,g]=o.useState(!1),[x,N]=o.useState({totalCards:0,totalViews:0,totalLikes:0,thisMonth:0});o.useEffect(()=>{j&&A()},[j]);const A=async()=>{var t,s,n,y;try{w(!0);const a=await k.getMy();f(a.cards||[]);const $=((t=a.cards)==null?void 0:t.reduce((c,l)=>c+(l.views||0),0))||0,E=((s=a.cards)==null?void 0:s.reduce((c,l)=>c+(l.likesCount||0),0))||0,I=((n=a.cards)==null?void 0:n.filter(c=>{const l=new Date(c.createdAt),C=new Date;return l.getMonth()===C.getMonth()&&l.getFullYear()===C.getFullYear()}).length)||0;N({totalCards:((y=a.cards)==null?void 0:y.length)||0,totalViews:$,totalLikes:E,thisMonth:I})}catch{m.error("Erreur lors du chargement de vos cartes")}finally{w(!1)}},D=async()=>{if(r)try{await k.delete(r._id),f(t=>t.filter(s=>s._id!==r._id)),g(!1),b(null),m.success("Carte supprimée avec succès"),N(t=>({...t,totalCards:t.totalCards-1,totalViews:t.totalViews-(r.views||0),totalLikes:t.totalLikes-(r.likesCount||0)}))}catch{m.error("Erreur lors de la suppression")}},V=t=>{b(t),g(!0)},v=()=>{b(null),g(!1)},_=async t=>{if(navigator.share)try{await navigator.share({title:t.title,text:t.description,url:`${window.location.origin}/cards/${t._id}`})}catch{}else{const s=`${window.location.origin}/cards/${t._id}`;await navigator.clipboard.writeText(s),m.success("Lien copié dans le presse-papiers")}};return u?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:e.jsx(P,{preset:"page"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Mes Cartes de Visite"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Gérez et suivez vos cartes de visite numériques"})]}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Total Cartes"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:x.totalCards})]}),e.jsx(q,{className:"h-8 w-8 text-purple-400"})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Vues Totales"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:x.totalViews})]}),e.jsx(M,{className:"w-8 h-8 text-green-400"})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Likes Totaux"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:x.totalLikes})]}),e.jsx(S,{className:"w-8 h-8 text-red-400"})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-sm",children:"Ce Mois"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:x.thisMonth})]}),e.jsx(p,{className:"w-8 h-8 text-purple-400"})]})})]}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("h2",{className:"text-xl font-semibold text-white",children:[d.length," carte",d.length>1?"s":""]})}),e.jsxs(h,{to:"/create-card",className:"inline-flex items-center gap-2 bg-blue-500/30 hover:bg-blue-500/40 border border-blue-500/50 rounded-xl px-6 py-3 text-white font-medium transition-all duration-300 hover:scale-105",children:[e.jsx(p,{className:"w-5 h-5"}),"Créer une Carte"]})]}),d.length===0?e.jsx(i.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"text-center py-16",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-12 max-w-md mx-auto",children:[e.jsx(p,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Aucune carte créée"}),e.jsx("p",{className:"text-white/60 mb-6",children:"Commencez par créer votre première carte de visite numérique"}),e.jsxs(h,{to:"/create-card",className:"inline-flex items-center gap-2 bg-blue-500/30 hover:bg-blue-500/40 border border-blue-500/50 rounded-xl px-6 py-3 text-white font-medium transition-all duration-300 hover:scale-105",children:[e.jsx(p,{className:"w-5 h-5"}),"Créer ma première carte"]})]})}):e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map((t,s)=>{var n;return e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl overflow-hidden hover:bg-white/15 transition-all duration-300 group",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[t.image?e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500/30 to-purple-500/30 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl font-bold text-white/60",children:((n=t.title)==null?void 0:n.charAt(0))||"?"})}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.isActive?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-gray-500/20 text-gray-400 border border-gray-500/30"}`,children:t.isActive?"Actif":"Inactif"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2 truncate",children:t.title}),e.jsx("p",{className:"text-white/60 text-sm mb-4 line-clamp-2",children:t.subtitle||t.description}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-white/60",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:t.views||0})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:t.likesCount||0})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{to:`/cards/${t._id}`,className:"flex-1 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-500/30 rounded-lg px-3 py-2 text-center text-blue-400 text-sm font-medium transition-colors",children:"Voir"}),e.jsx(h,{to:`/edit-card/${t._id}`,className:"flex-1 bg-green-500/20 hover:bg-green-500/30 border border-green-500/30 rounded-lg px-3 py-2 text-center text-green-400 text-sm font-medium transition-colors",children:"Modifier"}),e.jsx("button",{onClick:()=>_(t),className:"bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/30 rounded-lg p-2 text-purple-400 transition-colors",children:e.jsx(F,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>V(t),className:"bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded-lg p-2 text-red-400 transition-colors",children:e.jsx(H,{className:"w-4 h-4"})})]})]})]},t._id)})}),e.jsx(T,{children:L&&e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:v,children:e.jsxs(i.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 max-w-md w-full",onClick:t=>t.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Supprimer la carte"}),e.jsxs("p",{className:"text-white/70 mb-6",children:['Êtes-vous sûr de vouloir supprimer la carte "',r==null?void 0:r.title,'" ? Cette action est irréversible.']}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:v,className:"flex-1 bg-gray-500/20 hover:bg-gray-500/30 border border-gray-500/30 rounded-lg px-4 py-2 text-gray-300 font-medium transition-colors",children:"Annuler"}),e.jsx("button",{onClick:D,disabled:u,className:"flex-1 bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded-lg px-4 py-2 text-red-400 font-medium transition-colors disabled:opacity-50",children:u?"Suppression...":"Supprimer"})]})]})})})]})})};export{W as default};
//# sourceMappingURL=MyCards-23b8ebd6.js.map
