import{r as c,e as I,u as $,z as g,j as e,L as w,m}from"./index-8cd23c11.js";import{L as T}from"./LoadingSpinner-9af0e7b2.js";import{M as _,H as B}from"./HeartIcon-cced07ef.js";import{H as N}from"./HeartIcon-61eeb04d.js";import{E as D}from"./EyeIcon-02704138.js";import{S as z}from"./ShareIcon-1962f896.js";import{T as P}from"./TrashIcon-a0377199.js";function q({title:t,titleId:r,...s},a){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),t?c.createElement("title",{id:r},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const H=c.forwardRef(q),M=H,U="https://your-api-domain.com/api",l=I.create({baseURL:`${U}/favorites`,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(t=>{const r=localStorage.getItem("token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));l.interceptors.response.use(t=>t,t=>{var r;return((r=t.response)==null?void 0:r.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/login"),Promise.reject(t)});const E={getAll:async(t={})=>{var r,s;try{return(await l.get("/",{params:t})).data}catch(a){throw new Error(((s=(r=a.response)==null?void 0:r.data)==null?void 0:s.message)||"Erreur lors de la rÃ©cupÃ©ration des favoris")}},add:async t=>{var r,s;try{return(await l.post("/",{cardId:t})).data}catch(a){throw new Error(((s=(r=a.response)==null?void 0:r.data)==null?void 0:s.message)||"Erreur lors de l'ajout aux favoris")}},remove:async t=>{var r,s;try{return(await l.delete(`/${t}`)).data}catch(a){throw new Error(((s=(r=a.response)==null?void 0:r.data)==null?void 0:s.message)||"Erreur lors de la suppression des favoris")}},check:async t=>{var r,s;try{return(await l.get(`/check/${t}`)).data}catch(a){throw new Error(((s=(r=a.response)==null?void 0:r.data)==null?void 0:s.message)||"Erreur lors de la vÃ©rification des favoris")}},toggle:async t=>{var r,s;try{return(await l.post("/toggle",{cardId:t})).data}catch(a){throw new Error(((s=(r=a.response)==null?void 0:r.data)==null?void 0:s.message)||"Erreur lors de la modification des favoris")}},getByCategory:async t=>{var r,s;try{return(await l.get("/category",{params:{category:t}})).data}catch(a){throw new Error(((s=(r=a.response)==null?void 0:r.data)==null?void 0:s.message)||"Erreur lors de la rÃ©cupÃ©ration par catÃ©gorie")}},search:async(t,r={})=>{var s,a;try{const u={q:t,...r};return(await l.get("/search",{params:u})).data}catch(u){throw new Error(((a=(s=u.response)==null?void 0:s.data)==null?void 0:a.message)||"Erreur lors de la recherche dans les favoris")}},getStats:async()=>{var t,r;try{return(await l.get("/stats")).data}catch(s){throw new Error(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Erreur lors de la rÃ©cupÃ©ration des statistiques")}},export:async(t="json")=>{var r,s;try{return(await l.get("/export",{params:{format:t},responseType:"blob"})).data}catch(a){throw new Error(((s=(r=a.response)==null?void 0:r.data)==null?void 0:s.message)||"Erreur lors de l'export des favoris")}},import:async t=>{var r,s;try{const a=new FormData;return a.append("favorites",t),(await l.post("/import",a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){throw new Error(((s=(r=a.response)==null?void 0:r.data)==null?void 0:s.message)||"Erreur lors de l'import des favoris")}},clear:async()=>{var t,r;try{return(await l.delete("/clear")).data}catch(s){throw new Error(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Erreur lors de la suppression de tous les favoris")}},getRecent:async(t=10)=>{var r,s;try{return(await l.get("/recent",{params:{limit:t}})).data}catch(a){throw new Error(((s=(r=a.response)==null?void 0:r.data)==null?void 0:s.message)||"Erreur lors de la rÃ©cupÃ©ration des favoris rÃ©cents")}},getCount:async()=>{var t,r;try{return(await l.get("/count")).data}catch(s){throw new Error(((r=(t=s.response)==null?void 0:t.data)==null?void 0:r.message)||"Erreur lors du comptage des favoris")}}},K=()=>{const{user:t}=$(),[r,s]=c.useState([]),[a,u]=c.useState(!0),[d,S]=c.useState(""),[p,C]=c.useState("all"),[b,k]=c.useState("recent"),[f,v]=c.useState(null);c.useEffect(()=>{t&&L()},[t]);const L=async()=>{try{u(!0);const o=await E.getAll();s(o.favorites||[])}catch{g.error("Erreur lors du chargement des favoris")}finally{u(!1)}},A=async o=>{try{v(o),await E.remove(o),s(i=>i.filter(n=>n.card._id!==o)),g.success("RetirÃ© des favoris")}catch{g.error("Erreur lors de la suppression")}finally{v(null)}},R=async o=>{if(navigator.share)try{await navigator.share({title:o.title,text:o.description,url:`${window.location.origin}/cards/${o._id}`})}catch{}else{const i=`${window.location.origin}/cards/${o._id}`;await navigator.clipboard.writeText(i),g.success("Lien copiÃ© dans le presse-papiers")}},h=r.filter(o=>{var y,j;const i=o.card,n=!d||i.title.toLowerCase().includes(d.toLowerCase())||((y=i.subtitle)==null?void 0:y.toLowerCase().includes(d.toLowerCase()))||((j=i.description)==null?void 0:j.toLowerCase().includes(d.toLowerCase())),x=p==="all"||i.category===p;return n&&x}).sort((o,i)=>{switch(b){case"alphabetical":return o.card.title.localeCompare(i.card.title);case"category":return o.card.category.localeCompare(i.card.category);case"recent":default:return new Date(i.createdAt)-new Date(o.createdAt)}}),F=[...new Set(r.map(o=>o.card.category))].filter(Boolean);return t?a?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:e.jsx(T,{preset:"page"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Mes Favoris"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Retrouvez toutes vos cartes de visite prÃ©fÃ©rÃ©es"})]}),e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/40"}),e.jsx("input",{type:"text",placeholder:"Rechercher dans vos favoris...",value:d,onChange:o=>S(o.target.value),className:"w-full bg-white/5 border border-white/20 rounded-xl pl-10 pr-4 py-3 text-white placeholder-white/40 focus:outline-none focus:border-blue-500/50 focus:bg-white/10 transition-all"})]}),e.jsxs("select",{value:p,onChange:o=>C(o.target.value),className:"bg-white/5 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500/50 focus:bg-white/10 transition-all",children:[e.jsx("option",{value:"all",children:"Toutes les catÃ©gories"}),F.map(o=>e.jsx("option",{value:o,children:o},o))]}),e.jsxs("select",{value:b,onChange:o=>k(o.target.value),className:"bg-white/5 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500/50 focus:bg-white/10 transition-all",children:[e.jsx("option",{value:"recent",children:"Plus rÃ©cents"}),e.jsx("option",{value:"alphabetical",children:"AlphabÃ©tique"}),e.jsx("option",{value:"category",children:"Par catÃ©gorie"})]})]}),e.jsxs("div",{className:"mt-4 text-white/60 text-sm",children:[h.length," favori",h.length>1?"s":""," trouvÃ©",h.length>1?"s":""]})]}),h.length===0?e.jsx(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"text-center py-16",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-12 max-w-md mx-auto",children:[e.jsx(N,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:d||p!=="all"?"Aucun rÃ©sultat":"Aucun favori"}),e.jsx("p",{className:"text-white/60 mb-6",children:d||p!=="all"?"Essayez de modifier vos critÃ¨res de recherche":"Commencez par ajouter des cartes Ã  vos favoris"}),!d&&p==="all"&&e.jsxs(w,{to:"/cards",className:"inline-flex items-center gap-2 bg-blue-500/30 hover:bg-blue-500/40 border border-blue-500/50 rounded-xl px-6 py-3 text-white font-medium transition-all duration-300 hover:scale-105",children:[e.jsx(M,{className:"w-5 h-5"}),"DÃ©couvrir des cartes"]})]})}):e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((o,i)=>{var x;const n=o.card;return e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*i},className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl overflow-hidden hover:bg-white/15 transition-all duration-300 group",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[n.image?e.jsx("img",{src:n.image,alt:n.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-pink-500/30 to-purple-500/30 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl font-bold text-white/60",children:((x=n.title)==null?void 0:x.charAt(0))||"?"})}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-full p-2",children:e.jsx(B,{className:"w-4 h-4 text-red-400"})})}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:"px-2 py-1 bg-white/20 backdrop-blur-sm border border-white/30 rounded-full text-xs font-medium text-white",children:n.category})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2 truncate",children:n.title}),e.jsx("p",{className:"text-white/60 text-sm mb-4 line-clamp-2",children:n.subtitle||n.description}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-white/60",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:n.views||0})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:n.likesCount||0})]})]}),e.jsxs("p",{className:"text-xs text-white/40 mb-4",children:["AjoutÃ© le ",new Date(o.createdAt).toLocaleDateString("fr-FR")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{to:`/cards/${n._id}`,className:"flex-1 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-500/30 rounded-lg px-3 py-2 text-center text-blue-400 text-sm font-medium transition-colors",children:"Voir"}),e.jsx("button",{onClick:()=>R(n),className:"bg-purple-500/20 hover:bg-purple-500/30 border border-purple-500/30 rounded-lg p-2 text-purple-400 transition-colors",children:e.jsx(z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>A(n._id),disabled:f===n._id,className:"bg-red-500/20 hover:bg-red-500/30 border border-red-500/30 rounded-lg p-2 text-red-400 transition-colors disabled:opacity-50",children:f===n._id?e.jsx("div",{className:"w-4 h-4 animate-spin rounded-full border-2 border-red-400 border-t-transparent"}):e.jsx(P,{className:"w-4 h-4"})})]})]})]},o._id)})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-8 text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-6",children:"ðŸ”’"}),e.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"Login Required"}),e.jsx("p",{className:"text-white/70 mb-6",children:"You must be logged in to view your favorites."}),e.jsx(w,{to:"/login",className:"inline-block bg-blue-500/30 hover:bg-blue-500/40 border border-blue-500/50 rounded-xl px-6 py-3 text-white font-medium transition-all duration-300 hover:scale-105",children:"Sign In"})]})})};export{K as default};
//# sourceMappingURL=Favorites-d29798ad.js.map
