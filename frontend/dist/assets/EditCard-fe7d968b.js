import{d as A,a as M,u as B,r as d,z as u,j as e,m as C,L}from"./index-8cd23c11.js";import{c as E}from"./cards-86624514.js";import{L as F}from"./LoadingSpinner-9af0e7b2.js";import{A as R,T as q}from"./TagIcon-3824d318.js";import{P}from"./PhoneIcon-faa230c0.js";const W=()=>{const{id:c}=A(),h=M(),{user:p}=B(),[S,g]=d.useState(!0),[w,f]=d.useState(!1),[s,j]=d.useState({}),[r,b]=d.useState({title:"",subtitle:"",description:"",phone:"",email:"",web:"",image:{url:"",alt:""},address:{state:"",country:"",city:"",street:"",houseNumber:"",zip:""},category:"Technology",tags:[],socialMedia:{facebook:"",twitter:"",linkedin:"",instagram:""}}),y=d.useCallback(async()=>{var t,a,l,o,x,m,v,N,k;try{g(!0);const i=(await E.getById(c)).card;if(i.user_id!==p._id){u.error("Vous n'avez pas l'autorisation de modifier cette carte"),h("/my-cards");return}b({title:i.title||"",subtitle:i.subtitle||"",description:i.description||"",phone:i.phone||"",email:i.email||"",web:i.website||"",image:((t=i.image)==null?void 0:t.url)||"",country:((a=i.address)==null?void 0:a.country)||"Israel",city:((l=i.address)==null?void 0:l.city)||"Tel Aviv",street:((o=i.address)==null?void 0:o.street)||"",houseNumber:((x=i.address)==null?void 0:x.houseNumber)||"",category:i.category||"Technology",tags:i.tags||[],socialMedia:{facebook:((m=i.socialLinks)==null?void 0:m.facebook)||"",twitter:((v=i.socialLinks)==null?void 0:v.twitter)||"",linkedin:((N=i.socialLinks)==null?void 0:N.linkedin)||"",instagram:((k=i.socialLinks)==null?void 0:k.instagram)||""}})}catch{u.error("Erreur lors du chargement de la carte"),h("/my-cards")}finally{g(!1)}},[c,p._id,h]);d.useEffect(()=>{c&&y()},[c,y]);const T=()=>{const t={};return r.title.trim()||(t.title="Le titre est requis"),r.subtitle.trim()||(t.subtitle="Le sous-titre est requis"),r.description.trim()||(t.description="La description est requise"),r.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)&&(t.email="Email invalide"),r.phone&&!/^[\d\s\-+()]+$/.test(r.phone)&&(t.phone="Numéro de téléphone invalide"),r.web&&!/^https?:\/\/.+/.test(r.web)&&(t.web="URL invalide (doit commencer par http:// ou https://)"),j(t),Object.keys(t).length===0},z=async t=>{if(t.preventDefault(),!T()){u.error("Veuillez corriger les erreurs dans le formulaire");return}try{f(!0),await E.update(c,r),u.success("Carte mise à jour avec succès"),h("/my-cards")}catch{u.error("Erreur lors de la mise à jour")}finally{f(!1)}},n=t=>{const{name:a,value:l}=t.target;if(a.includes(".")){const[o,x]=a.split(".");b(m=>({...m,[o]:{...m[o],[x]:l}}))}else b(o=>({...o,[a]:l}));s[a]&&j(o=>({...o,[a]:""}))},$=t=>{const a=t.target.value.split(",").map(l=>l.trim()).filter(Boolean);b(l=>({...l,tags:a}))},D=["Technology","Healthcare","Finance","Education","Retail","Food & Beverage","Real Estate","Legal","Consulting","Marketing","Design","Construction","Other"];return S?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:e.jsx(F,{preset:"page"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx(C.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(L,{to:"/my-cards",className:"p-2 bg-white/10 hover:bg-white/20 border border-white/20 rounded-xl text-white transition-colors",children:e.jsx(R,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Modifier la Carte"}),e.jsx("p",{className:"text-white/70",children:"Mettez à jour les informations de votre carte de visite"})]})]})}),e.jsxs(C.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},onSubmit:z,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5"}),"Informations de Base"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Titre *"}),e.jsx("input",{type:"text",name:"title",value:r.title,onChange:n,className:`w-full bg-white/5 border rounded-xl px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:bg-white/10 transition-all ${s.title?"border-red-500/50":"border-white/20 focus:border-blue-500/50"}`,placeholder:"Nom de votre entreprise"}),s.title&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:s.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Sous-titre *"}),e.jsx("input",{type:"text",name:"subtitle",value:r.subtitle,onChange:n,className:`w-full bg-white/5 border rounded-xl px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:bg-white/10 transition-all ${s.subtitle?"border-red-500/50":"border-white/20 focus:border-blue-500/50"}`,placeholder:"Votre fonction ou spécialité"}),s.subtitle&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:s.subtitle})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Description *"}),e.jsx("textarea",{name:"description",value:r.description,onChange:n,rows:4,className:`w-full bg-white/5 border rounded-xl px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:bg-white/10 transition-all resize-none ${s.description?"border-red-500/50":"border-white/20 focus:border-blue-500/50"}`,placeholder:"Décrivez votre activité et vos services"}),s.description&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:s.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Catégorie"}),e.jsx("select",{name:"category",value:r.category,onChange:n,className:"w-full bg-white/5 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500/50 focus:bg-white/10 transition-all",children:D.map(t=>e.jsx("option",{value:t,className:"bg-slate-800",children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Tags (séparés par des virgules)"}),e.jsx("input",{type:"text",value:r.tags.join(", "),onChange:$,className:"w-full bg-white/5 border border-white/20 rounded-xl px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:border-blue-500/50 focus:bg-white/10 transition-all",placeholder:"web design, marketing, consulting"})]})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5"}),"Informations de Contact"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Téléphone"}),e.jsx("input",{type:"tel",name:"phone",value:r.phone,onChange:n,className:`w-full bg-white/5 border rounded-xl px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:bg-white/10 transition-all ${s.phone?"border-red-500/50":"border-white/20 focus:border-blue-500/50"}`,placeholder:"+33 1 23 45 67 89"}),s.phone&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:s.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:r.email,onChange:n,className:`w-full bg-white/5 border rounded-xl px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:bg-white/10 transition-all ${s.email?"border-red-500/50":"border-white/20 focus:border-blue-500/50"}`,placeholder:"contact@exemple.com"}),s.email&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:s.email})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-white/80 text-sm font-medium mb-2",children:"Site Web"}),e.jsx("input",{type:"url",name:"web",value:r.web,onChange:n,className:`w-full bg-white/5 border rounded-xl px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:bg-white/10 transition-all ${s.web?"border-red-500/50":"border-white/20 focus:border-blue-500/50"}`,placeholder:"https://www.exemple.com"}),s.web&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:s.web})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx(L,{to:"/my-cards",className:"px-6 py-3 bg-gray-500/20 hover:bg-gray-500/30 border border-gray-500/30 rounded-xl text-gray-300 font-medium transition-colors",children:"Annuler"}),e.jsx("button",{type:"submit",disabled:w,className:"px-6 py-3 bg-blue-500/30 hover:bg-blue-500/40 border border-blue-500/50 rounded-xl text-white font-medium transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Sauvegarde...":"Sauvegarder"})]})]})]})})};export{W as default};
//# sourceMappingURL=EditCard-fe7d968b.js.map
