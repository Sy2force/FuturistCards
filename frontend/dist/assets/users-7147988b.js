import{e as n}from"./index-8cd23c11.js";const c="https://your-api-domain.com/api",a=n.create({baseURL:`${c}/users`,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(t=>{const r=localStorage.getItem("token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));a.interceptors.response.use(t=>t,t=>{var r;return((r=t.response)==null?void 0:r.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/login"),Promise.reject(t)});const u={getProfile:async()=>{var t,r;try{return(await a.get("/me")).data}catch(e){throw new Error(((r=(t=e.response)==null?void 0:t.data)==null?void 0:r.message)||"Erreur lors de la récupération du profil")}},updateProfile:async t=>{var r,e;try{return(await a.put("/me",t)).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Erreur lors de la mise à jour du profil")}},changePassword:async t=>{var r,e;try{return(await a.put("/me/password",t)).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Erreur lors du changement de mot de passe")}},uploadAvatar:async t=>{var r,e;try{const s=new FormData;return s.append("avatar",t),(await a.post("/me/avatar",s,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Erreur lors du téléchargement de l'image")}},deleteAvatar:async()=>{var t,r;try{return(await a.delete("/me/avatar")).data}catch(e){throw new Error(((r=(t=e.response)==null?void 0:t.data)==null?void 0:r.message)||"Erreur lors de la suppression de l'image")}},getById:async t=>{var r,e;try{return(await a.get(`/${t}`)).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"User not found")}},getAll:async(t={})=>{var r,e;try{return(await a.get("/",{params:t})).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Error fetching users")}},updateStatus:async(t,r)=>{var e,s;try{return(await a.patch(`/${t}/status`,{status:r})).data}catch(o){throw new Error(((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||"Erreur lors de la mise à jour du statut")}},updateRole:async(t,r)=>{var e,s;try{return(await a.patch(`/${t}/role`,{role:r})).data}catch(o){throw new Error(((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||"Erreur lors de la mise à jour du rôle")}},delete:async t=>{var r,e;try{return(await a.delete(`/${t}`)).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Error deleting user")}},getStats:async t=>{var r,e;try{return(await a.get(`/${t}/stats`)).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Erreur lors de la récupération des statistiques")}},search:async(t,r={})=>{var e,s;try{const o={q:t,...r};return(await a.get("/search",{params:o})).data}catch(o){throw new Error(((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||"Erreur lors de la recherche")}},toggleFollow:async t=>{var r,e;try{return(await a.post(`/${t}/follow`)).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Erreur lors du suivi")}},getFollowers:async t=>{var r,e;try{return(await a.get(`/${t}/followers`)).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Erreur lors de la récupération des followers")}},getFollowing:async t=>{var r,e;try{return(await a.get(`/${t}/following`)).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Erreur lors de la récupération des abonnements")}},getActivity:async(t,r={})=>{var e,s;try{return(await a.get(`/${t}/activity`,{params:r})).data}catch(o){throw new Error(((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||"Erreur lors de la récupération de l'activité")}},updatePreferences:async t=>{var r,e;try{return(await a.put("/me/preferences",t)).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Erreur lors de la mise à jour des préférences")}},getNotifications:async(t={})=>{var r,e;try{return(await a.get("/me/notifications",{params:t})).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Erreur lors de la récupération des notifications")}},markNotificationRead:async t=>{var r,e;try{return(await a.patch(`/me/notifications/${t}/read`)).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Erreur lors du marquage de la notification")}},deleteAccount:async t=>{var r,e;try{return(await a.delete("/me",{data:{password:t}})).data}catch(s){throw new Error(((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Erreur lors de la suppression du compte")}}};export{u};
//# sourceMappingURL=users-7147988b.js.map
