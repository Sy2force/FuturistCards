import{r,u as k,z as x,j as e,m as A}from"./index-8cd23c11.js";import{u as p}from"./users-7147988b.js";import{c as E}from"./cards-86624514.js";import{L as R}from"./LoadingSpinner-9af0e7b2.js";import{E as f}from"./EyeIcon-02704138.js";import{C as S}from"./ChartBarIcon-4bb0bddb.js";function $({title:l,titleId:s,...c},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":s},c),l?r.createElement("title",{id:s},l):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const L=r.forwardRef($),w=L;function M({title:l,titleId:s,...c},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":s},c),l?r.createElement("title",{id:s},l):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const B=r.forwardRef(M),j=B;function I({title:l,titleId:s,...c},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":s},c),l?r.createElement("title",{id:s},l):null,r.createElement("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z"}))}const T=r.forwardRef(I),g=T,O=()=>{const{user:l}=k(),[s,c]=r.useState("dashboard"),[d,N]=r.useState([]),[m,v]=r.useState([]),[o,h]=r.useState({totalUsers:0,totalCards:0,totalViews:0,activeUsers:0}),[y,u]=r.useState(!0);r.useEffect(()=>{(l==null?void 0:l.role)==="admin"&&b()},[l,s]);const b=async()=>{try{if(u(!0),s==="dashboard"||s==="users"){const a=(await p.getAllUsers()).users||[];N(a),h(i=>({...i,totalUsers:a.length,activeUsers:a.filter(n=>n.isActive!==!1).length}))}if(s==="dashboard"||s==="cards"){const a=(await E.getAllCards()).cards||[];v(a);const i=a.reduce((n,U)=>n+(U.views||0),0);h(n=>({...n,totalCards:a.length,totalViews:i}))}}catch{x.error("Erreur lors du chargement des données admin")}finally{u(!1)}},C=async t=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cet utilisateur ?"))try{await p.deleteUser(t),x.success("Utilisateur supprimé"),b()}catch{x.error("Erreur lors de la suppression")}};return!l||l.role!=="admin"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-8 text-center",children:[e.jsx(j,{className:"w-16 h-16 mx-auto mb-4 text-red-400"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Accès Refusé"}),e.jsx("p",{className:"text-white/70",children:"Vous n'avez pas les permissions pour accéder à cette page."})]})}):y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:e.jsx(R,{preset:"page"})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-8 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Tableau de Bord Admin"}),e.jsx("p",{className:"text-white/70 text-lg",children:"Gérez les utilisateurs et surveillez l'activité de la plateforme"})]}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-1 border border-white/20",children:["dashboard","users","cards"].map(t=>e.jsx("button",{onClick:()=>c(t),className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${s===t?"bg-blue-500 text-white shadow-lg":"text-white/70 hover:text-white hover:bg-white/10"}`,children:t==="dashboard"?"Tableau de Bord":t==="users"?"Utilisateurs":"Cartes"},t))})}),s==="dashboard"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-500/20 border border-blue-500/30 rounded-xl flex items-center justify-center",children:e.jsx(g,{className:"h-8 w-8 text-blue-400"})}),e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:o.totalUsers}),e.jsx("div",{className:"text-white/70",children:"Utilisateurs Total"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-green-500/20 border border-green-500/30 rounded-xl flex items-center justify-center",children:e.jsx(w,{className:"w-8 h-8 text-green-400"})}),e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:o.totalCards}),e.jsx("div",{className:"text-white/70",children:"Cartes Total"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-purple-500/20 border border-purple-500/30 rounded-xl flex items-center justify-center",children:e.jsx(f,{className:"w-8 h-8 text-purple-400"})}),e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:o.totalViews}),e.jsx("div",{className:"text-white/70",children:"Vues Total"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-yellow-500/20 border border-yellow-500/30 rounded-xl flex items-center justify-center",children:e.jsx(S,{className:"w-8 h-8 text-yellow-400"})}),e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:o.activeUsers}),e.jsx("div",{className:"text-white/70",children:"Utilisateurs Actifs"})]})]}),s==="users"&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(g,{className:"w-6 h-6"}),"Gestion des Utilisateurs (",d.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/20",children:[e.jsx("th",{className:"text-left py-3 px-4 text-white/80 font-medium",children:"Utilisateur"}),e.jsx("th",{className:"text-left py-3 px-4 text-white/80 font-medium",children:"Email"}),e.jsx("th",{className:"text-left py-3 px-4 text-white/80 font-medium",children:"Rôle"}),e.jsx("th",{className:"text-left py-3 px-4 text-white/80 font-medium",children:"Statut"}),e.jsx("th",{className:"text-left py-3 px-4 text-white/80 font-medium",children:"Inscription"}),e.jsx("th",{className:"text-left py-3 px-4 text-white/80 font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:d.map(t=>{var a,i;return e.jsxs("tr",{className:"border-b border-white/10 hover:bg-white/5",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center mr-3",children:e.jsxs("span",{className:"text-white text-sm font-bold",children:[((a=t.firstName)==null?void 0:a[0])||"U",((i=t.lastName)==null?void 0:i[0])||""]})}),e.jsx("div",{children:e.jsxs("div",{className:"text-white font-medium",children:[t.firstName," ",t.lastName]})})]})}),e.jsx("td",{className:"py-3 px-4 text-white/70",children:t.email}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.role==="admin"?"bg-red-500/20 text-red-300":t.role==="business"?"bg-blue-500/20 text-blue-300":"bg-gray-500/20 text-gray-300"}`,children:t.role==="admin"?"Admin":t.role==="business"?"Business":"User"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.isActive!==!1?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:t.isActive!==!1?"Actif":"Inactif"})}),e.jsx("td",{className:"py-3 px-4 text-white/70",children:new Date(t.createdAt).toLocaleDateString("fr-FR")}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:()=>C(t._id),className:"p-2 text-red-400 hover:text-red-300 transition-colors rounded-lg hover:bg-red-500/10",title:"Supprimer",children:e.jsx(j,{className:"h-5 w-5"})})})})]},t._id)})})]})})]}),s==="cards"&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(w,{className:"w-6 h-6"}),"Gestion des Cartes (",m.length,")"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(t=>{var a,i,n;return e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4",children:[((a=t.image)==null?void 0:a.url)&&e.jsx("img",{src:t.image.url,alt:t.image.alt,className:"w-full h-32 object-cover rounded-lg mb-3"}),e.jsx("h4",{className:"text-white font-semibold mb-1 truncate",children:t.title}),e.jsx("p",{className:"text-white/70 text-sm mb-2 truncate",children:t.subtitle}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-white/50 mb-3",children:[e.jsx("span",{className:"bg-blue-500/20 px-2 py-1 rounded",children:t.category}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"w-3 h-3"}),t.views||0]})})]}),e.jsxs("div",{className:"text-xs text-white/50",children:["Par: ",((i=t.user_id)==null?void 0:i.firstName)||"Utilisateur"," ",((n=t.user_id)==null?void 0:n.lastName)||""]})]},t._id)})})]})]})})})};export{O as default};
//# sourceMappingURL=AdminCRM-aed71b13.js.map
