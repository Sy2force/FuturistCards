{"version":3,"file":"cards-86624514.js","sources":["../../src/api/cards.js"],"sourcesContent":["import axios from 'axios';\n\n// Create axios instance for cards API\nconst cardsAPI = axios.create({\n  baseURL: `${import.meta.env.VITE_API_URL || 'http://localhost:5000/api'}/cards`,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Add token to requests\ncardsAPI.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Handle response errors\ncardsAPI.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      localStorage.removeItem('refreshToken');\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\n// Cards API functions\nexport const cards = {\n  // Get all cards (public)\n  getAll: async (params = {}) => {\n    try {\n      const response = await cardsAPI.get('/', { params });\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response?.data?.message || 'Erreur lors de la récupération des cartes');\n    }\n  },\n\n  // Get card by ID\n  getById: async (id) => {\n    try {\n      const response = await cardsAPI.get(`/${id}`);\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response?.data?.message || 'Carte introuvable');\n    }\n  },\n\n  // Get my cards (authenticated)\n  getMy: async () => {\n    try {\n      const response = await cardsAPI.get('/my-cards');\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response?.data?.message || 'Erreur lors de la récupération de vos cartes');\n    }\n  },\n\n  // Create new card\n  create: async (cardData) => {\n    try {\n      const response = await cardsAPI.post('/', cardData);\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response?.data?.message || 'Erreur lors de la création de la carte');\n    }\n  },\n\n  // Update card\n  update: async (id, cardData) => {\n    try {\n      const response = await cardsAPI.put(`/${id}`, cardData);\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response?.data?.message || 'Erreur lors de la mise à jour de la carte');\n    }\n  },\n\n  // Delete card\n  delete: async (id) => {\n    try {\n      const response = await cardsAPI.delete(`/${id}`);\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response?.data?.message || 'Erreur lors de la suppression de la carte');\n    }\n  },\n\n  // Like/Unlike card\n  toggleLike: async (id) => {\n    try {\n      const response = await cardsAPI.patch(`/${id}/like`);\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response?.data?.message || 'Erreur lors de la mise à jour du like');\n    }\n  },\n\n  // Search cards\n  search: async (query, filters = {}) => {\n    try {\n      const params = { q: query, ...filters };\n      const response = await cardsAPI.get('/search', { params });\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response?.data?.message || 'Erreur lors de la recherche');\n    }\n  },\n\n  // Get cards by category\n  getByCategory: async (category) => {\n    try {\n      const response = await cardsAPI.get('/category', { params: { category } });\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response?.data?.message || 'Erreur lors de la récupération par catégorie');\n    }\n  },\n\n  // Get popular cards\n  getPopular: async (limit = 10) => {\n    try {\n      const response = await cardsAPI.get('/popular', { params: { limit } });\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response?.data?.message || 'Erreur lors de la récupération des cartes populaires');\n    }\n  },\n\n  // Get recent cards\n  getRecent: async (limit = 10) => {\n    try {\n      const response = await cardsAPI.get('/recent', { params: { limit } });\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response?.data?.message || 'Erreur lors de la récupération des cartes récentes');\n    }\n  },\n\n  // Update card status (admin only)\n  updateStatus: async (id, status) => {\n    try {\n      const response = await cardsAPI.patch(`/${id}/status`, { status });\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response?.data?.message || 'Erreur lors de la mise à jour du statut');\n    }\n  },\n\n  // Get card statistics (owner/admin only)\n  getStats: async (id) => {\n    try {\n      const response = await cardsAPI.get(`/${id}/stats`);\n      return response.data;\n    } catch (error) {\n      throw new Error(error.response?.data?.message || 'Erreur lors de la récupération des statistiques');\n    }\n  }\n};\n\nexport default cards;\n"],"names":["cardsAPI","axios","config","token","error","response","_a","cards","params","_b","id","cardData","query","filters","category","limit","status"],"mappings":"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"}